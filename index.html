<!doctype html>
<html lang="en"><head><meta charset="utf-8" />
<title>YCATS - Video App</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
body{font-family:Arial;margin:0}
header{background:#fff;padding:1rem;text-align:center}
nav ul{list-style:none;display:flex;justify-content:center;gap:1rem;padding:0}
.video-container{padding:20px;display:flex;flex-direction:column;align-items:center}
.video-feed{display:flex;flex-wrap:wrap;justify-content:center}
.video-card{margin:10px;width:320px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);overflow:hidden}
video{width:100%;height:200px;object-fit:cover}
.video-info{padding:10px}
.upload-container{padding:20px;display:flex;flex-direction:column;align-items:center;gap:8px}
#upload-button{padding:10px 20px;background:#337ab7;color:#fff;border:none;border-radius:5px;cursor:pointer}
</style></head>
<body>
<header><nav><ul>
<li><a href="/">Home</a></li><li><a href="#">Discover</a></li><li><a href="#">Upload</a></li><li><a href="#">Profile</a></li>
</ul></nav></header>
<main>
<div class="video-container"><div class="video-feed" id="video-feed"></div></div>
<div class="upload-container">
<form id="upload-form">
<input type="file" id="video-file" accept="video/*" required>
<input type="text" id="video-title" placeholder="Video title">
<input type="text" id="video-description" placeholder="Video description">
<button id="upload-button">Upload</button>
</form>
<div id="status"></div>
</div>
</main>
<script>
async function loadVideos(){
 const res=await fetch('/videos'); const vids=await res.json();
 const feed=document.getElementById('video-feed'); feed.innerHTML='';
 vids.forEach(v=>{
  const c=document.createElement('div'); c.className='video-card';
  c.innerHTML=`<video src="${v.url}" controls></video>
  <div class="video-info"><h3>${v.title}</h3><p>${v.description}</p></div>`;
  feed.appendChild(c);
 });
}
document.getElementById('upload-form').addEventListener('submit',async e=>{
 e.preventDefault();
 const fd=new FormData();
 fd.append('video',document.getElementById('video-file').files[0]);
 fd.append('title',document.getElementById('video-title').value);
 fd.append('description',document.getElementById('video-description').value);
 const st=document.getElementById('status'); st.textContent='Uploading...';
 const r=await fetch('/upload',{method:'POST',body:fd});
 st.textContent=r.ok?'Uploaded':'Error uploading';
 loadVideos();
});
loadVideos();
</script>
</body></html>
